{% comment %} MODALE POUR LE TOURNAMENT LOCAL {% endcomment %}
<div class="modal fade" id="localTournament" tabindex="-1" aria-labelledby="tourModalLabel" aria-hidden="true">
	<div class="modal-dialog tourModal" style="min-width: 700px;">
		<div class="modal-content bg-dark-subtle shadow">
			<div class="modal-header">
				<h5 class="modal-title" id="tourModalLabel">Play a local tournament</h5>
				<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			</div>
			<div class="modal-body d-flex justify-content-center align-items-center">
				<div class="canvas" width="600" height="600">
					<canvas id="CanvasTourLocal" width="600" height="600"></canvas>
					<script>
						var pongScript;
						document.addEventListener('DOMContentLoaded', function() {
							var canvasModal = document.getElementById('localTournament');

							canvasModal.addEventListener('show.bs.modal', function () {
								console.log('ONLINE');
								pongScript = document.createElement('script');
								pongScript.src = '../static/scripts/pongtournamentlocal.js';
								pongScript.defer = true;
								document.body.appendChild(pongScript);
							});
							canvasModal.addEventListener('hidden.bs.modal', function () {
								if (pongScript) {
									document.body.removeChild(pongScript);
									pongScript = null;
									// stopPongGame(); 
								}
							});
						});
					</script>
				</div>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
			</div>
		</div>
	</div>
</div>
{% comment %} MODALE POUR LE TOURNAMENT ONLINE {% endcomment %}
<div class="modal fade" id="onlineTournament" tabindex="-1" aria-labelledby="tourModalLabel" aria-hidden="true">
	<div class="modal-dialog tourModal" style="min-width: 700px;">
		<div class="modal-content bg-dark-subtle shadow">
			<div class="modal-header">
				<h5 class="modal-title" id="tourModalLabel">Online tournament</h5>
				<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			</div>
			<div class="modal-body">
				<div id="playViewOnlineTour" style="display: none">
					<div class="canvas" width="600" height="600">
						<canvas id="CanvasTourOnline" width="600" height="600">
							<script>
								var pongScript;
								document.addEventListener('DOMContentLoaded', function() {
									var canvasModal = document.getElementById('onlineTournament');

									canvasModal.addEventListener('show.bs.modal', function () {
										console.log('ONLINE TOURNAMENT');
										pongScript = document.createElement('script');
										pongScript.src = '../static/scripts/pongtournamentonline.js';
										pongScript.defer = true;
										document.body.appendChild(pongScript);
									});
									canvasModal.addEventListener('hidden.bs.modal', function () {
										if (pongScript) {
											document.body.removeChild(pongScript);
											pongScript = null;
											// stopPongGame(); 
										}
									});
								});
							</script>
						</canvas>
					</div>
				</div>
				<div id="drawViewOnlineTour" style="display: none">
					<div class="d-flex flex-row me-3 overflow-auto" style="height: 600px">
						{% if current_tourn %}
							<h4>Draw for tournament: {{ current_tourn.tourn_name }}</h4>
							{% for round, matches in current_tourn.l_matches.items %}
							<h5>Round: {{ round }}</h5>
								<div class="overflow-auto d-flex flex-column align-items-around" style="height: 500px">
									<ul>
									{% for match in matches %}
										<li style="height: 80px; width: 150px; font-size: small;" class="bg-white bg-opacity-25 rounded shadow-sm d-flex flex-column justify-content-center align-items-center mb-2">
											{% if match.player1 == user.username %}
												<div class="bg-primary text-light col-8 rounded p-1 shadow-sm text-center mb-2">{{ match.player1 }}</div>
											{% else %}
												<div class="bg-dark text-light col-8 rounded p-1 shadow-sm text-center">{{ match.player1 }}</div>
											{% endif %}
											{% if match.player2 == user.username %}
												<div class="bg-primary text-light col-8 rounded p-1 shadow-sm text-center mb-2">{{ match.player2 }}</div>
											{% else %}
												<div class="bg-dark text-light col-8 rounded p-1 shadow-sm text-center">{{ match.player2 }}</div>
											{% endif %}
										</li>
									{% endfor %}
									</ul>
								</div>
							{% endfor %}
						{% else %}
							<p>No on-going tournament.</p>
						{% endif %}
					</div>
				</div>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
			</div>
		</div>
	</div>
</div>
